{"display_date": "2010/07/03 07:03:00 -0700", "views_count": 51, "short_url": "http://post.ly/4djRh", "site_id": 75592, "site": {"subhead": "Data exploration and computer advice.", "full_hostname": "arsatiki.posterous.com", "name": "The Technical", "profile_image_75": "http://files.posterous.com/user_profile_pics/30986/che_baarissa_ilman_paitaa.png", "hostname": "arsatiki", "is_group": false, "time_zone": "Pacific Time (US & Canada)", "current_user_notification_frequency": "", "profile_image_35": "http://files.posterous.com/user_profile_pics/30986/che_baarissa_ilman_paitaa_thumb.png", "comment_permission": 2, "id": 75592, "sharing_enabled": false, "posts_count": 20, "header_image": null, "is_private": false, "current_user_role": ""}, "likes": [], "allowed": true, "body_full": "<p>I am spending this July in Beijing with my wife. Beijing is in China. China filters the Internet access out of the country with the so called <a href=\"http://en.wikipedia.org/wiki/Great_Firewall\">Great Firewall</a>.</p>\r\n<p>Among the many restricted sites are Wikipedia and several blogging platforms, including Posterous. I am writing a <a href=\"http://bjing.posterous.com\">travelogue on Posterous</a>. A circumvention is needed.</p>\r\n<p>I suffer, however, from an even more difficult connection problem. My equipment in China consists of a Macbook Air, an iPod Touch and an iPad. None of them have &nbsp;Ethernet sockets. Our Internet is provided by an PPPoE box that only has a single Ethernet cable sticking out.</p>\r\n<p><strong>Step 1: Sharing the Internet</strong></p>\r\n<p>Luckily, my wife brought her Powerbook with us. We plug the PB in via the PPPoE connection and use Internet Sharing to create a wireless network (10.0.2/24) in the apartment.</p>\r\n<p><strong>Step 2: Creating a SOCKS proxy</strong></p>\r\n<p>Traditionally I have used SSH local port forwarding to create an SSH tunnel out of a firewall. This approach requires that I have a proxy available on the other end. This time I have no knowledge of one. I could have bought a server for a month and use that as a proxy.</p>\r\n<p>HOWEVER. Just today I learned of SSH dynamic port forwarding, i.e. SOCKS proxies. In short, typing ssh -D9000 creates a SOCKS proxy at my localhost port 9000.</p>\r\n<p>This is both simpler and more flexible than local port forwarding. Each local port can only be mapped to a single endpoint outside the firewall. Dynamic port forwarding can be used to connect to any endpoint. Of course, this requires support from the application.</p>\r\n<p>In our case, we set up a following SSH configration on my wife&rsquo;s PB:</p>\r\n<div class=\"CodeRay\">\n  <div class=\"code\"><pre>Host proxy\nHostName myhost.foo.bar\nUserName xyzzy\nDynamicForward 10001</pre></div>\n</div>\n\r\n<p>To top it off, we set up her public DSA key on the proxy host authorized_keys. This way we can just write &ldquo;ssh proxy&rdquo; and everything is set up for us.</p>\r\n<p><strong>Step 3: Configuring the proxy on client computers</strong></p>\r\n<p>It is easy to configure the SOCKS proxy on my Macbook. However, both the iPad and iPod only seem to allow a HTTP proxy. To bypass this, I set up the Powerbook to serve a browser proxy auto-config file. The contents are rather simple:</p>\r\n<div class=\"CodeRay\">\n  <div class=\"code\"><pre>function FindProxyForURL(url, host) {\n    return &quot;SOCKS 10.0.2.1:10001&quot;;\n}</pre></div>\n</div>\n\r\n<p>This file is hosted at <a href=\"http://10.0.2.1/b.pac\">http://10.0.2.1/b.pac</a> . I added this URL under the settings of the Wi-Fi network I had made in Step 1. Boom! Now both iThingies read the .pac file, find the SOCKS proxy config and network is browsable.</p>\r\n<p><strong>CAVEATS</strong>:</p>\r\n<ul>\r\n<li>Some applications just don&rsquo;t plain work with SOCKS<br /> \r\n<ul>\r\n<li>Taskpaper, Twitter clients</li>\r\n</ul>\r\n</li>\r\n</ul>", "post_image_500": null, "id": 21897582, "twitter_account": "", "title": "Untitled", "media": {"images": [], "audio_files": [], "videos": []}, "comments": [], "body_cleaned": "<p>I am spending this July in Beijing with my wife. Beijing is in China. China filters the Internet access out of the country with the so called <a href=\"http://en.wikipedia.org/wiki/Great_Firewall\" rel=\"nofollow\">Great Firewall</a>.</p>\n<p>Among the many restricted sites are Wikipedia and several blogging platforms, including Posterous. I am writing a <a href=\"http://bjing.posterous.com\" rel=\"nofollow\">travelogue on Posterous</a>. A circumvention is needed.</p>\n<p>I suffer, however, from an even more difficult connection problem. My equipment in China consists of a Macbook Air, an iPod Touch and an iPad. None of them have \u00a0Ethernet sockets. Our Internet is provided by an PPPoE box that only has a single Ethernet cable sticking out.</p>\n<p><strong>Step 1: Sharing the Internet</strong></p>\n<p>Luckily, my wife brought her Powerbook with us. We plug the PB in via the PPPoE connection and use Internet Sharing to create a wireless network (10.0.2/24) in the apartment.</p>\n<p><strong>Step 2: Creating a SOCKS proxy</strong></p>\n<p>Traditionally I have used SSH local port forwarding to create an SSH tunnel out of a firewall. This approach requires that I have a proxy available on the other end. This time I have no knowledge of one. I could have bought a server for a month and use that as a proxy.</p>\n<p>HOWEVER. Just today I learned of SSH dynamic port forwarding, i.e. SOCKS proxies. In short, typing ssh -D9000 creates a SOCKS proxy at my localhost port 9000.</p>\n<p>This is both simpler and more flexible than local port forwarding. Each local port can only be mapped to a single endpoint outside the firewall. Dynamic port forwarding can be used to connect to any endpoint. Of course, this requires support from the application.</p>\n<p>In our case, we set up a following SSH configration on my wife\u2019s PB:</p>\n<div class=\"CodeRay\">\n  <div class=\"code\"><pre>Host proxy\nHostName myhost.foo.bar\nUserName xyzzy\nDynamicForward 10001</pre></div>\n</div></p><p><p>To top it off, we set up her public DSA key on the proxy host authorized_keys. This way we can just write \u201cssh proxy\u201d and everything is set up for us.</p>\n<p><strong>Step 3: Configuring the proxy on client computers</strong></p>\n<p>It is easy to configure the SOCKS proxy on my Macbook. However, both the iPad and iPod only seem to allow a HTTP proxy. To bypass this, I set up the Powerbook to serve a browser proxy auto-config file. The contents are rather simple:</p>\n<div class=\"CodeRay\">\n  <div class=\"code\"><pre>function FindProxyForURL(url, host) {\n    return \"SOCKS 10.0.2.1:10001\";\n}</pre></div>\n</div></p><p><p>This file is hosted at <a href=\"http://10.0.2.1/b.pac\">http://10.0.2.1/b.pac</a> . I added this URL under the settings of the Wi-Fi network I had made in Step 1. Boom! Now both iThingies read the .pac file, find the SOCKS proxy config and network is browsable.</p>\n<p><strong>CAVEATS</strong>:</p>\n<ul>\n<li>Some applications just don\u2019t plain work with SOCKS<br /><ul>\n<li>Taskpaper, Twitter clients</li>\n</ul>\n</li>\n</ul>", "draft": false, "full_url": "http://arsatiki.posterous.com/21897582", "scheduled": false, "tags": [], "body_html": "<p>I am spending this July in Beijing with my wife. Beijing is in China. China filters the Internet access out of the country with the so called <a href=\"http://en.wikipedia.org/wiki/Great_Firewall\">Great Firewall</a>.</p>\r\n<p>Among the many restricted sites are Wikipedia and several blogging platforms, including Posterous. I am writing a <a href=\"http://bjing.posterous.com\">travelogue on Posterous</a>. A circumvention is needed.</p>\r\n<p>I suffer, however, from an even more difficult connection problem. My equipment in China consists of a Macbook Air, an iPod Touch and an iPad. None of them have &nbsp;Ethernet sockets. Our Internet is provided by an PPPoE box that only has a single Ethernet cable sticking out.</p>\r\n<p><strong>Step 1: Sharing the Internet</strong></p>\r\n<p>Luckily, my wife brought her Powerbook with us. We plug the PB in via the PPPoE connection and use Internet Sharing to create a wireless network (10.0.2/24) in the apartment.</p>\r\n<p><strong>Step 2: Creating a SOCKS proxy</strong></p>\r\n<p>Traditionally I have used SSH local port forwarding to create an SSH tunnel out of a firewall. This approach requires that I have a proxy available on the other end. This time I have no knowledge of one. I could have bought a server for a month and use that as a proxy.</p>\r\n<p>HOWEVER. Just today I learned of SSH dynamic port forwarding, i.e. SOCKS proxies. In short, typing ssh -D9000 creates a SOCKS proxy at my localhost port 9000.</p>\r\n<p>This is both simpler and more flexible than local port forwarding. Each local port can only be mapped to a single endpoint outside the firewall. Dynamic port forwarding can be used to connect to any endpoint. Of course, this requires support from the application.</p>\r\n<p>In our case, we set up a following SSH configration on my wife&rsquo;s PB:</p>\r\n<div class=\"CodeRay\">\n  <div class=\"code\"><pre>Host proxy\nHostName myhost.foo.bar\nUserName xyzzy\nDynamicForward 10001</pre></div>\n</div>\n\r\n<p>To top it off, we set up her public DSA key on the proxy host authorized_keys. This way we can just write &ldquo;ssh proxy&rdquo; and everything is set up for us.</p>\r\n<p><strong>Step 3: Configuring the proxy on client computers</strong></p>\r\n<p>It is easy to configure the SOCKS proxy on my Macbook. However, both the iPad and iPod only seem to allow a HTTP proxy. To bypass this, I set up the Powerbook to serve a browser proxy auto-config file. The contents are rather simple:</p>\r\n<div class=\"CodeRay\">\n  <div class=\"code\"><pre>function FindProxyForURL(url, host) {\n    return &quot;SOCKS 10.0.2.1:10001&quot;;\n}</pre></div>\n</div>\n\r\n<p>This file is hosted at <a href=\"http://10.0.2.1/b.pac\">http://10.0.2.1/b.pac</a> . I added this URL under the settings of the Wi-Fi network I had made in Step 1. Boom! Now both iThingies read the .pac file, find the SOCKS proxy config and network is browsable.</p>\r\n<p><strong>CAVEATS</strong>:</p>\r\n<ul>\r\n<li>Some applications just don&rsquo;t plain work with SOCKS<br /> \r\n<ul>\r\n<li>Taskpaper, Twitter clients</li>\r\n</ul>\r\n</li>\r\n</ul>", "locations": [], "user": {"body": "I am much more prolific in Twitter. See http://twitter.com/arsatiki\r\n", "profile_pic": "http://files.posterous.com/user_profile_pics/30986/che_baarissa_ilman_paitaa.png", "display_name": "Antti Rasinen", "firstname": "Antti", "lastname": "Rasinen", "profile_image_35": "http://files.posterous.com/user_profile_pics/30986/che_baarissa_ilman_paitaa_thumb.png", "last_activity": "2012/02/23 08:30:10 -0800", "nickname": "Antti", "id": 29785, "profile_url": "http://posterous.com/users/KPdfsrBQmB"}, "date": "2010-07-03 17:03:00+03:00", "replies_count": 0, "body_excerpt": "I am spending this July in Beijing with my wife. Beijing is in China. China filters the Internet access out of the country with the so called Great Firewall. Among the many restricted sites are Wikipedia and several blogging platforms, including P...", "slug": "21897582", "is_private": false, "likes_count": 0, "privatestring": "AubqxAqihj", "number_of_comments": 0, "comments_count": 0, "current_member": "", "author_display_name": "Antti Rasinen", "post_image_115": null, "is_owned_by_current_user": null}